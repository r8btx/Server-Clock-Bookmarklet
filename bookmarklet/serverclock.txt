javascript:void%20function(){(()=%3E{function%20a(){return%20performance.timeOrigin+performance.now()}function%20b(){if(l%3Cm)return!1;if(l%3E=n)return!0;let%20a=1/0,b=1/0,c=-Infinity,d=-Infinity;for(let%20e=0;e%3Ck.length;e++)k[e]%3Ca%3F(b=a,a=k[e]):k[e]%3Cb%26%26(b=k[e]),k[e]%3Ec%3F(d=c,c=k[e]):k[e]%3Ed%26%26(d=k[e]);return%20850%3C=c-a%26%26b-a%3Cq%26%26c-d%3Cq}function%20c(){let%20a=0,b=[],c=!1;for(k.sort(function(c,a){return%20a-c});a%3Ck.length%26%26!c;){for(let%20d=k.length-1;0%3C=d;d--)if(1e3%3Ek[a]-k[d]){d===k.length-1%26%26(c=!0);let%20e=d-a;b.push([e,a]);break}a++}b.sort(function(c,a){return%20a-c}),g=k[b[0][1]],console.log(%22[Adjustments]%22),k.forEach(a=%3E{console.log(a/1e3)}),console.log(%22The%20chosen%20adjustment%20is%22,g/1e3,%22sec.%22)}function%20d(){let%20e=0,f=0;const%20g=new%20PerformanceObserver(a=%3E{a.getEntries().filter(({name:a})=%3Ea===r).forEach(a=%3E{f=a.requestStart-a.startTime+(a.responseStart-a.requestStart)/2}),e%26%26f%26%26(clearTimeout(h),k.push(e-(i+f)),console.log(%22Collected%20an%20adjustment%22),l++,b()%3Fc():setTimeout(d,o+500*Math.random())),g.disconnect()});g.observe({type:%22resource%22});let%20i=a();fetch(s).then(a=%3E{e=Date.parse(a.headers.get(%22date%22));const%20b=a.text()}).catch(a=%3E{console.error(%22Fetch%20Error:%22,a)}),h=setTimeout(()=%3E{console.log(%22Request%20timed%20out.%20Timeout:%22,5,%22sec.%22),g.disconnect(),d()},p)}let%20e,f,g,h,k=[],l=0,m=5,n=25,o=250;const%20p=5e3,q=250,r=window.location.href,s=new%20Request(r,{method:%22GET%22,cache:%22no-store%22,headers:new%20Headers({Connection:%22keep-alive%22,%22Cache-Control%22:%22no-cache%22,Pragma:%22no-cache%22,Expires:%220%22})});d(),function%20c(){var%20h=Math.floor;function%20i(a){function%20b(a){var%20b=Math.max,c=Math.min;const%20f=a.clientX-d,g=a.clientY-e,h=window.innerWidth-v.offsetWidth,i=window.innerHeight-v.offsetHeight,j=b(0,c(f,h)),k=b(0,c(g,i));v.style.left=`${j}px`,v.style.top=`${k}px`}function%20c(){document.removeEventListener(%22mousemove%22,b),document.removeEventListener(%22mouseup%22,c)}let%20d=a.clientX-v.offsetLeft,e=a.clientY-v.offsetTop;document.addEventListener(%22mousemove%22,b),document.addEventListener(%22mouseup%22,c)}function%20j(a,b){a.addEventListener(%22contextmenu%22,a=%3E{if(a.preventDefault(),document.getElementById(`e${r}`)){const%20b=document.getElementById(`e${r}`);return%20b.style.top=`${a.clientY}px`,void(b.style.left=`${a.clientX}px`)}const%20c=document.createElement(%22div%22);c.id=`e${r}`,c.style.top=`${a.clientY}px`,c.style.left=`${a.clientX}px`;for(const%20d%20of%20b){const%20a=document.createElement(%22div%22);a.textContent=d.label,a.addEventListener(%22click%22,d.action),a.classList.add(`e${s}`),c.appendChild(a)}const%20d=()=%3E{document.body.removeChild(c),document.removeEventListener(%22click%22,d)};document.body.appendChild(c),document.addEventListener(%22click%22,d)})}function%20m(){const%20a=new%20Date(f);let%20b=a.getHours(),c=a.getMinutes(),d=a.getSeconds();const%20e=12%3C=b%3F%22PM%22:%22AM%22;return%20b%25=12,b=b%3Fb:12,b=(b+%22%22).padStart(2,%220%22),c=(c+%22%22).padStart(2,%220%22),d=(d+%22%22).padStart(2,%220%22),`${b}:${c}:${d}%20${e}`}function%20o(){f=a()+g,v.textContent=m(),e=setTimeout(o,1e3-f%251e3)}function%20p(){let%20a=setInterval(()=%3E{b()%26%26(clearInterval(a),o())},1e3)}let%20q=h(Math.random()*67108864).toString(16),r=h(Math.random()*67108864).toString(16),s=h(Math.random()*67108864).toString(16),t=`%23e${q}%20{%20user-select:%20none;z-index:%209998;position:%20fixed;top:%2010px;left:%2010px;background-color:%20%23f2f2f2;border:%201px%20solid%20%23ddd;border-radius:%206px;padding:%2012px;cursor:%20pointer;transition:%20box-shadow%200.3s%20ease;font-family:%20Arial,%20sans-serif;font-size:%201.125rem;line-height:%201.75rem;}%23e${q}:hover%20{box-shadow:%200%202px%205px%20rgba(0,%200,%200,%200.1);}%23e${r}%20{user-select:%20none;z-index:%209999;display:%20flex;flex-direction:%20column;position:%20fixed;background:%20%23fff;box-shadow:%200%202px%205px%20rgba(0,%200,%200,%200.2);border-radius:%204px;padding:%206px%200;font-family:%20Arial,%20sans-serif;font-size:%201.125rem;line-height:%201.75rem;}%20.e${s}%20{display:%20block;padding:%206px%2012px;cursor:%20pointer;transition:%20background-color%200.3s%20ease;}.e${s}:hover%20{background-color:%20%233CB371;color:%20white;}`;const%20u=[{label:%22Add%205%20more%20samples%22,action:()=%3E{console.log(%22Adding%205%20more%20samples%20to%20improve%20synchronization...%22),l=0,n=5,d()}},{label:%22Empty%20collected%20samples%22,action:()=%3E{k.length=0,console.log(%22Emptied%20all%20collected%20samples.%22)}},{label:%22Visit%20project%20page%22,action:()=%3E{console.log(%22Opening%20the%20project%20page...%22),window.open(%22https://github.com/r8btx/Server-Clock-Bookmarklet/%22,%22_blank%22)}},{label:%22Exit%22,action:()=%3E{clearTimeout(e),document.body.removeChild(v),console.log(%22UI%20removed.%22)}}],v=document.createElement(%22div%22);v.textContent=%22Synchronizing%20the%20clock...%22,v.id=`e${q}`,v.addEventListener(%22mousedown%22,i),j(v,u);let%20w=document.createElement(%22style%22);w.innerText=t.replace(/\n/g,%22%22).replace(/\s+/g,%22%20%22),document.head.appendChild(w),document.body.appendChild(v),p()}()})()}();