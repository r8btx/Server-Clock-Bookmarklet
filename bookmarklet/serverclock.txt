javascript:void%20function(){(()=%3E{function%20a(){if(i%3Cj)return!1;if(i%3E=k)return!0;let%20a=1/0,b=1/0,c=-Infinity,d=-Infinity;for(let%20e=0;e%3Ch.length;e++)h[e]%3Ca%3F(b=a,a=h[e]):h[e]%3Cb%26%26(b=h[e]),h[e]%3Ec%3F(d=c,c=h[e]):h[e]%3Ed%26%26(d=h[e]);return%20850%3C=c-a%26%26b-a%3Cn%26%26c-d%3Cn}function%20b(){let%20a=0,b=[],c=!1;for(h.sort(function(c,a){return%20a-c});a%3Ch.length%26%26!c;){for(let%20d=h.length-1;0%3C=d;d--)if(1e3%3Eh[a]-h[d]){d===h.length-1%26%26(c=!0);let%20e=d-a;b.push([e,a]);break}a++}b.sort(function(c,a){return%20a-c}),f=h[b[0][1]],console.log(%22[Adjustments]%22),h.forEach(a=%3E{console.log(a/1e3)}),console.log(%22The%20chosen%20adjustment%20is%22,f/1e3,%22sec.%22)}function%20c(){let%20d=0,f=0;const%20j=new%20PerformanceObserver(e=%3E{e.getEntries().filter(({name:a})=%3Ea===o).forEach(a=%3E{f=a.requestStart-a.startTime+(a.responseStart-a.requestStart)/2}),d%26%26f%26%26(clearTimeout(g),h.push(d-(k.getTime()+f)),console.log(%22Collected%20an%20adjustment%22),i++,a()%3Fb():setTimeout(c,l+500*Math.random())),j.disconnect()});j.observe({type:%22resource%22});let%20k=new%20Date;fetch(p).then(a=%3E{d=Date.parse(a.headers.get(%22date%22));const%20b=a.text()}).catch(a=%3E{console.error(%22Fetch%20Error:%22,a)}),g=setTimeout(()=%3E{console.log(%22Request%20timed%20out.%20Timeout:%22,5,%22sec.%22),j.disconnect(),c()},m)}let%20d,e,f,g,h=[],i=0,j=5,k=25,l=250;const%20m=5e3,n=250,o=window.location.href,p=new%20Request(o,{method:%22GET%22,cache:%22no-store%22,headers:new%20Headers({Connection:%22keep-alive%22,%22Cache-Control%22:%22no-cache%22,Pragma:%22no-cache%22,Expires:%220%22})});c(),function%20b(){var%20g=Math.floor;function%20j(a){function%20b(a){var%20b=Math.max,c=Math.min;const%20f=a.clientX-d,g=a.clientY-e,h=window.innerWidth-u.offsetWidth,i=window.innerHeight-u.offsetHeight,j=b(0,c(f,h)),k=b(0,c(g,i));u.style.left=`${j}px`,u.style.top=`${k}px`}function%20c(){document.removeEventListener(%22mousemove%22,b),document.removeEventListener(%22mouseup%22,c)}let%20d=a.clientX-u.offsetLeft,e=a.clientY-u.offsetTop;document.addEventListener(%22mousemove%22,b),document.addEventListener(%22mouseup%22,c)}function%20l(a,b){a.addEventListener(%22contextmenu%22,a=%3E{if(a.preventDefault(),document.getElementById(`e${q}`)){const%20b=document.getElementById(`e${q}`);return%20b.style.top=`${a.clientY}px`,void(b.style.left=`${a.clientX}px`)}const%20c=document.createElement(%22div%22);c.id=`e${q}`,c.style.top=`${a.clientY}px`,c.style.left=`${a.clientX}px`;for(const%20d%20of%20b){const%20a=document.createElement(%22div%22);a.textContent=d.label,a.addEventListener(%22click%22,d.action),a.classList.add(`e${r}`),c.appendChild(a)}const%20d=()=%3E{document.body.removeChild(c),document.removeEventListener(%22click%22,d)};document.body.appendChild(c),document.addEventListener(%22click%22,d)})}function%20m(){const%20a=new%20Date(e);let%20b=a.getHours(),c=a.getMinutes(),d=a.getSeconds();const%20f=12%3C=b%3F%22PM%22:%22AM%22;return%20b%25=12,b=b%3Fb:12,b=(b+%22%22).padStart(2,%220%22),c=(c+%22%22).padStart(2,%220%22),d=(d+%22%22).padStart(2,%220%22),`${b}:${c}:${d}%20${f}`}function%20n(){e=new%20Date().getTime()+f,u.textContent=m(),d=setTimeout(n,1e3-e%251e3)}function%20o(){let%20b=setInterval(()=%3E{a()%26%26(clearInterval(b),n())},1e3)}let%20p=g(Math.random()*67108864).toString(16),q=g(Math.random()*67108864).toString(16),r=g(Math.random()*67108864).toString(16),s=`%23e${p}%20{%20user-select:%20none;z-index:%209998;position:%20fixed;top:%2010px;left:%2010px;background-color:%20%23f2f2f2;border:%201px%20solid%20%23ddd;border-radius:%206px;padding:%2012px;cursor:%20pointer;transition:%20box-shadow%200.3s%20ease;font-family:%20Arial,%20sans-serif;font-size:%201.125rem;line-height:%201.75rem;}%23e${p}:hover%20{box-shadow:%200%202px%205px%20rgba(0,%200,%200,%200.1);}%23e${q}%20{user-select:%20none;z-index:%209999;display:%20flex;flex-direction:%20column;position:%20fixed;background:%20%23fff;box-shadow:%200%202px%205px%20rgba(0,%200,%200,%200.2);border-radius:%204px;padding:%206px%200;font-family:%20Arial,%20sans-serif;font-size:%201.125rem;line-height:%201.75rem;}%20.e${r}%20{display:%20block;padding:%206px%2012px;cursor:%20pointer;transition:%20background-color%200.3s%20ease;}.e${r}:hover%20{background-color:%20%233CB371;color:%20white;}`;const%20t=[{label:%22Add%205%20more%20samples%22,action:()=%3E{console.log(%22Adding%205%20more%20samples%20to%20improve%20synchronization...%22),i=0,k=5,c()}},{label:%22Empty%20collected%20samples%22,action:()=%3E{h.length=0,console.log(%22Emptied%20all%20collected%20samples.%22)}},{label:%22Visit%20project%20page%22,action:()=%3E{console.log(%22Opening%20the%20project%20page...%22),window.open(%22https://github.com/r8btx/Server-Clock-Bookmarklet/%22,%22_blank%22)}},{label:%22Exit%22,action:()=%3E{clearTimeout(d),document.body.removeChild(u),console.log(%22UI%20removed.%22)}}],u=document.createElement(%22div%22);u.textContent=%22Synchronizing%20the%20clock...%22,u.id=`e${p}`,u.addEventListener(%22mousedown%22,j),l(u,t);let%20v=document.createElement(%22style%22);v.innerText=s.replace(/\n/g,%22%22).replace(/\s+/g,%22%20%22),document.head.appendChild(v),document.body.appendChild(u),o()}()})()}();